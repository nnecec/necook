# 缓存

> 《HTTP 权威指南》 第七章 缓存

Web 缓存是可以自动保存常见文档副本的 HTTP 设备。使用缓存有下列优点：

- 缓存减少了冗余的数据传输
- 缓存缓解了网络瓶颈的问题
- 缓存降低了对原始服务器的要求
- 缓存降低了距离时延

可以用已有的副本为某些到达缓存的请求提供服务，这被称为缓存命中。其他一些到达缓存的请求可能会由于没有副本可用，而被转发给原始服务器，这被称为**缓存未命中**。

原始服务器的内容可能会发生变化，缓存要不时对其进行检测，看看它们保存的副本是否仍是服务器上最新的副本。这些“新鲜度检测”被称为 HTTP 再验证。缓存可以在任意时刻，以任意的频率对副本进行再验证。

缓存对缓存的副本进行再验证时，会向原始服务器发送一个小的再验证请求。如果内容没有变化，服务器会以一个小的 304 Not Modified 进行响应。只要缓存知道副本仍然有效，就会再次将副本标识为暂时新鲜的，并将副本提供给客户端，这被称作再验证命中（revalidate hit）或缓慢命中（slow hit）。这种方式确实要与原始服务器进行核对，所以会比单纯的缓存命中要慢，但它没有从服务器中获取对象数据，所以要比缓存未命中快一些。

由缓存提供服务的请求所占的比例被称为缓存命中率（cache hit rate，或称为缓存命中比例），有时也被称为文档命中率（document hit rate）。