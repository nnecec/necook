```javascript
 async function async1(){
    console.log('async1 start')
    await async2()
    console.log('async1 end')
  }
  async function async2(){
    console.log('async2')
  }
  console.log('script start')
 setTimeout(function(){
    console.log('setTimeout') 
 },0)  
 async1();
 new promise(function(resolve){
    console.log('promise1')
    resolve();
 }).then(function(){
    console.log('promise2')
 })
 console.log('script end')
```

promise 优先于 setTimeout micro-task 和 macro-task

macro-task队列真实包含任务：script(主程序代码),setTimeout, setInterval, setImmediate, I/O, UI rendering

micro-task队列真实包含任务：process.nextTick, Promises, Object.observe, MutationObserver

由此我们得到的执行顺序应该为：script(主程序代码)—>process.nextTick—>Promises…——>setTimeout——>setInterval——>setImmediate——> I/O——>UI rendering

```javascript
/*
script start
async1 start
async2
promise1
script end
promise2
async1 end
setTimeout
**/
```